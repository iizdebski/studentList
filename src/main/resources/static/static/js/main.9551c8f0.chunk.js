(this.webpackJsonpjs=this.webpackJsonpjs||[]).push([[0],{238:function(e,t,n){e.exports=n(474)},243:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){},474:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(7),i=n.n(l),o=(n(243),n(244),n(245),n(246),n(114)),s=n(115),c=n(116),u=n(136),d=n(134),m=n(84),f=function(e){if(e.ok)return e;var t=new Error(e.statusText);return t.response=e,e.json().then((function(e){t.error=e})),Promise.reject(t)},h=n(483),E=n(477),S=n(480),p=n(479),g=n(220),b=n(210),N=n(25),y=n(484),v=n(476),C=n(47),I=n(485),k=n(486),M=n(481),O=(n(247),function(e){return r.a.createElement("div",null,r.a.createElement(M.a,{fluid:!0,className:"footer text-center"},void 0!==e.numberOfStudents?r.a.createElement(b.a,{style:{backgroundColor:"#f56a00",marginRight:"5px"},size:"large"},e.numberOfStudents):null,r.a.createElement(N.a,{onClick:e.handleAddStudentClick,type:"primary"},"Add New Student +")))}),A=n(235),j=n(133),F=n(478),w=n(482),x={marginBottom:"10px"},V=Object(A.a)({backgroundColor:"#f50",color:"white"},x),B=function(e){return r.a.createElement(j.a,{initialValues:{firstName:"",lastName:"",email:"",gender:""},validate:function(e){var t={};return e.firstName||(t.firstName="First Name Required"),e.lastName||(t.lastName="Last Name Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email Required",e.gender?["MALE","male","FEMALE","female"].includes(e.gender)||(t.gender="Gender must be (MALE, male, FEMALE, female)"):t.gender="Gender Required",t},onSubmit:function(t,n){var a=n.setSubmitting;(function(e){return Object(m.a)("/api/students",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).then(f)})(t).then((function(){e.onSuccess()})).catch((function(t){e.onFailure(t)})).finally((function(){a(!1)}))}},(function(e){var t=e.values,n=e.errors,a=e.touched,l=e.handleChange,i=e.handleBlur,o=e.handleSubmit,s=e.isSubmitting,c=e.submitForm,u=e.isValid;return r.a.createElement("form",{onSubmit:o},r.a.createElement(F.a,{style:x,name:"firstName",onChange:l,onBlur:i,value:t.firstName,placeholder:"First name. E.g John"}),n.firstName&&a.firstName&&r.a.createElement(w.a,{style:V},n.firstName),r.a.createElement(F.a,{style:x,name:"lastName",onChange:l,onBlur:i,value:t.lastName,placeholder:"Last name. E.g Smith"}),n.lastName&&a.lastName&&r.a.createElement(w.a,{style:V},n.lastName),r.a.createElement(F.a,{style:x,name:"email",onChange:l,onBlur:i,value:t.email,placeholder:"Email. E.g example@gmail.com"}),n.email&&a.email&&r.a.createElement(w.a,{style:V},n.email),r.a.createElement(F.a,{style:x,name:"gender",onChange:l,onBlur:i,value:t.gender,placeholder:"Gender. E.g Male or Female"}),n.gender&&a.gender&&r.a.createElement(w.a,{style:V},n.gender),r.a.createElement(N.a,{onClick:function(){return c()},type:"submit",disabled:s|(a&&!u)},"Submit"))}))},D=function(e,t,n){h.a[e]({message:t,description:n})},L=function(e,t){return D("error",e,t)},T=n(138),R=n.n(T),q={margin:"5px 0"},J=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitter,n=e.initialValues;return r.a.createElement(j.a,{initialValues:n,validate:function(e){var t={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.firstName||(t.firstName="First name required"),e.lastName||(t.lastName="Last name required"),t},onSubmit:function(e,n){var a=n.setSubmitting;console.log(e),t(e),a(!1)}},(function(e){var t=e.values,n=e.errors,a=e.touched,l=e.handleChange,i=e.isValid,o=e.handleBlur,s=e.handleSubmit,c=e.isSubmitting,u=e.submitForm;return r.a.createElement("form",{onSubmit:s},r.a.createElement(F.a,{style:q,name:"firstName",onChange:l,onBlur:o,value:t.firstName,placeholder:"First Name. E.g. Jason"}),n.firstName&&a.firstName&&r.a.createElement(R.a,{type:"danger"},n.firstName),r.a.createElement(F.a,{style:q,name:"lastName",onChange:l,onBlur:o,value:t.lastName,placeholder:"Last Name. E.g. Bourne"}),n.lastName&&a.lastName&&r.a.createElement(R.a,{type:"danger"},n.lastName),r.a.createElement(F.a,{style:q,type:"email",name:"email",onChange:l,onBlur:o,value:t.email,placeholder:"Email.E.g. jasonbourne@gmail.com"}),n.email&&a.email&&r.a.createElement(R.a,{type:"danger"},n.email),r.a.createElement(N.a,{className:"mt-2 d-block",onClick:function(){return u()},type:"submit",disabled:c||a&&!i},"Submit"))}))}}]),n}(a.Component),W=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).openAddStudentModal=function(){return a.setState({isAddStudentModalVisible:!0})},a.closeAddStudentModal=function(){return a.setState({isAddStudentModalVisible:!1})},a.openStudentCourseModal=function(){return a.setState({isStudentCourseModalVisible:!0})},a.closeStudentCourseModal=function(){return a.setState({isStudentCourseModalVisible:!1})},a.openEditStudentModal=function(){return a.setState({isEditStudentModalVisible:!0})},a.closeEditStudentModal=function(){return a.setState({isEditStudentModalVisible:!1})},a.openNotificationWithIcon=function(e,t,n){return h.a[e]({message:t,description:n})},a.handleOnIdClick=function(e){(function(e){return Object(m.a)("/api/students/".concat(e,"/courses")).then(f)})(e).then((function(e){return e.json().then((function(e){a.setState({studentCourses:e})}))})).catch((function(e){console.log(e.error);var t=e.error.message,n=e.error.error;L(t,n)})),a.openStudentCourseModal()},a.deleteStudent=function(e){(function(e){return Object(m.a)("api/students/".concat(e),{method:"DELETE"}).then(f)})(e).then((function(){a.openNotificationWithIcon("success","Student deleted","Id: ".concat(e," was deleted.")),a.fetchStudents()})).catch((function(e){a.openNotificationWithIcon("error","error","(".concat(e.error.status,") ").concat(e.error.error))}))},a.editStudent=function(e){a.setState({selectedStudent:e}),a.openEditStudentModal()},a.updateStudentFormSubmitter=function(e){(function(e,t){return Object(m.a)("api/students/".concat(e),{headers:{"Content-Type":"application/json"},method:"PUT",body:JSON.stringify(t)}).then(f)})(e.studentId,e).then((function(){a.openNotificationWithIcon("success","Student updated","".concat(e.studentId," was updated")),a.closeEditStudentModal(),a.fetchStudents()})).catch((function(e){console.error(e.error),a.openNotificationWithIcon("error","error","(".concat(e.error.status,") ").concat(e.error.error))}))},a.state={students:[],studentCourses:[],selectedStudent:{},isFetching:!1,isAddStudentModalVisible:!1,isStudentCourseModalVisible:!1},a.fetchStudents=a.fetchStudents.bind(Object(c.a)(a)),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.fetchStudents()}},{key:"fetchStudents",value:function(){var e=this;this.setState({isFetching:!0}),Object(m.a)("/api/students").then(f).then((function(t){return t.json().then((function(t){e.setState({students:t,isFetching:!1})}))})).catch((function(t){console.log(t.error);var n=t.error.message,a=t.error.error;L(n,a),e.setState({isFetching:!1})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.students,a=t.studentCourses,l=t.isFetching,i=t.isAddStudentModalVisible,o=t.isStudentCourseModalVisible,s=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(E.a,{title:r.a.createElement("h3",null,"Student Course"),visible:o,onOk:e.closeStudentCourseModal,onCancel:e.closeStudentCourseModal,footer:null,width:1e3},!e.state.studentCourses.length<1?r.a.createElement(r.a.Fragment,null,a.map((function(e,t){return r.a.createElement("div",{key:"101".concat(t)},r.a.createElement(S.a,{bordered:!0,size:"small"},r.a.createElement(S.a.Item,{label:"Course Id",span:4},e.courseId),r.a.createElement(S.a.Item,{label:"Course Name",span:2},e.name),r.a.createElement(S.a.Item,{label:"Department",span:2},e.department),r.a.createElement(S.a.Item,{label:"Course Description",span:4},e.description),r.a.createElement(S.a.Item,{label:"Teacher",span:4},e.teacherName),r.a.createElement(S.a.Item,{label:"Start Date",span:2},e.startDate),r.a.createElement(S.a.Item,{label:"End Date",span:2},e.endDate),r.a.createElement(S.a.Item,{label:"Grade",span:4},e.grade)),r.a.createElement("hr",null))}))):r.a.createElement("h5",{className:"text-danger"},"No courses found")),r.a.createElement(E.a,{title:r.a.createElement("h4",null,"Add New Student"),visible:i,onOk:e.closeAddStudentModal,onCancel:e.closeAddStudentModal,width:1e3},r.a.createElement(B,{onSuccess:function(){e.closeAddStudentModal(),e.fetchStudents()},onFailure:function(e){console.log(JSON.stringify(e));var t=e.error.message,n=e.error.httpStatus;L(t,n)}})),r.a.createElement(E.a,{title:"Edit",visible:e.state.isEditStudentModalVisible,destroyOnClose:!0,onOk:e.closeEditStudentModal,onCancel:e.closeEditStudentModal,width:1e3},r.a.createElement(p.a,{title:"".concat(e.state.selectedStudent.studentId)}),r.a.createElement(J,{initialValues:e.state.selectedStudent,submitter:e.updateStudentFormSubmitter})),r.a.createElement(O,{handleAddStudentClick:e.openAddStudentModal,numberOfStudents:n.length})))};if(l)return r.a.createElement("div",{className:"text-center mt-5"},r.a.createElement(g.a,{indicator:r.a.createElement(I.a,{style:{fontSize:24},spin:!0})}));if(n&&n.length){var c=[{title:"",key:"avatar",render:function(e,t){return r.a.createElement(b.a,{size:"large"},"".concat(t.firstName.charAt(0).toUpperCase()).concat(t.lastName.charAt(0).toUpperCase()))}},{title:"Student Id",dataIndex:"studentId",key:"studentId",render:function(t){return r.a.createElement(N.a,{type:"link",onClick:function(){return e.handleOnIdClick(t)}},t)}},{title:"First Name",dataIndex:"firstName",key:"firstName"},{title:"Last Name",dataIndex:"lastName",key:"lastName"},{title:"Email",dataIndex:"email",key:"email"},{title:"Gender",dataIndex:"gender",key:"gender"},{title:"Action",key:"action",render:function(t,n){return r.a.createElement(r.a.Fragment,null,r.a.createElement(N.a,{type:"primary",style:{marginRight:16},onClick:function(){return e.editStudent(n)}},"Edit"),r.a.createElement(y.a,{icon:r.a.createElement(k.a,{style:{color:"red"}}),placement:"topRight",title:"DELETE ID: ".concat(n.studentId),okText:"Yes",cancelText:"No",onConfirm:function(){return e.deleteStudent(n.studentId)},onCancel:function(e){return e.stopPropagation()}},r.a.createElement(N.a,{danger:!0},"Delete")))}}];return r.a.createElement(M.a,{className:"py-5"},r.a.createElement("h1",{className:"text-center"},"Student Registration"),r.a.createElement(v.a,{style:{marginBottom:"100px"},dataSource:n,columns:c,rowKey:"studentId",pagination:!1}),s())}return r.a.createElement("div",null,r.a.createElement(C.a,{description:r.a.createElement("h2",null,"No Students Found")}),s())}}]),n}(a.Component);var Z=function(){return r.a.createElement("div",null,r.a.createElement(W,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[238,1,2]]]);
//# sourceMappingURL=main.9551c8f0.chunk.js.map